<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Lista de Itens - Controle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .editable-span {
            cursor: text;
            padding: 4px 8px;
            border-radius: 6px;
        }
        .editable-span:hover {
            background-color: #eef8f9;
        }
        .editable-span:focus {
            outline: none;
            box-shadow: 0 0 0 2px #5daeb5;
            background-color: white;
        }
        .price-input {
            width: 100px;
            padding: 4px;
            border-radius: 6px;
            text-align: right;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">

    <div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow-lg">
        <h1 class="text-3xl font-bold mb-4 text-center">Controle de Itens</h1>

        <div id="section" class="mb-6">
            <h2 class="text-xl font-semibold mb-2">Roupas e Acessórios</h2>
            <ul id="item-list" class="space-y-2"></ul>
            <div class="flex mt-2">
                <input id="new-item" type="text" placeholder="Adicionar item..." class="flex-grow p-2 border rounded-l-md">
                <button onclick="addItem()" class="bg-blue-500 text-white px-4 rounded-r-md">+</button>
            </div>
        </div>

        <div class="bg-blue-100 p-4 rounded-lg">
            <p class="font-semibold">Total da Sessão: <span id="total-session">R$ 0,00</span></p>
            <p class="font-semibold">Total Contribuição (Ganhos): <span id="total-contribution">R$ 0,00</span></p>
        </div>
    </div>

    <script>
        const itemList = document.getElementById('item-list');
        const totalSessionEl = document.getElementById('total-session');
        const totalContributionEl = document.getElementById('total-contribution');

        const items = [];

        function addItem(text = '', price = '', checked = false, gifted = false) {
            const item = { text, price, checked, gifted };
            items.push(item);
            renderItems();
        }

        function renderItems() {
            itemList.innerHTML = '';
            let total = 0;
            let contribution = 0;

            items.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'flex items-center gap-2';

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = item.checked;
                checkbox.addEventListener('change', () => {
                    item.checked = checkbox.checked;
                    calculateTotals();
                });

                const span = document.createElement('span');
                span.contentEditable = true;
                span.className = 'editable-span flex-grow';
                span.textContent = item.text;
                span.addEventListener('input', () => {
                    item.text = span.textContent;
                });

                const priceInput = document.createElement('input');
                priceInput.type = 'number';
                priceInput.className = 'price-input';
                priceInput.placeholder = 'R$ 0,00';
                priceInput.value = item.price;
                priceInput.addEventListener('input', () => {
                    item.price = priceInput.value;
                    calculateTotals();
                });

                const giftCheckbox = document.createElement('input');
                giftCheckbox.type = 'checkbox';
                giftCheckbox.checked = item.gifted;
                giftCheckbox.title = "Ganhei este item";
                giftCheckbox.addEventListener('change', () => {
                    item.gifted = giftCheckbox.checked;
                    calculateTotals();
                });

                const giftLabel = document.createElement('label');
                giftLabel.textContent = 'Ganhei';
                giftLabel.className = 'text-sm';

                li.appendChild(checkbox);
                li.appendChild(span);
                li.appendChild(priceInput);
                li.appendChild(giftCheckbox);
                li.appendChild(giftLabel);

                itemList.appendChild(li);

                const price = parseFloat(item.price) || 0;
                total += price;
                if (item.gifted) {
                    contribution += price;
                }
            });

            totalSessionEl.textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
            totalContributionEl.textContent = `R$ ${contribution.toFixed(2).replace('.', ',')}`;
        }

        function calculateTotals() {
            renderItems();
        }

        document.getElementById('new-item').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addItem(this.value);
                this.value = '';
            }
        });

        // Itens de exemplo iniciais
        addItem('05 cuecas brancas');
        addItem('04 lenços brancos');
        addItem('01 traje completo');
    </script>
</body>
</html>
