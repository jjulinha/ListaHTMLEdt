<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icone-obori.jpg">
    <meta name="theme-color" content="#A7D8DE">
    <title>Camarinha Obori - Maio/2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F2E8; 
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23BDE0E1' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .checklist-item { display: flex; align-items: center; }
        .checklist-item input:checked + span { text-decoration: line-through; color: #6b7280; }
        .progress-bar-fill { transition: width 0.5s ease-in-out; }
        .editable-span { cursor: text; flex-grow: 1; padding: 4px 8px; border-radius: 6px; }
        .editable-span:hover { background-color: #eef8f9; }
        .editable-span:focus { outline: none; box-shadow: 0 0 0 2px #5daeb5; background-color: white; }
        .price-input {
            width: 80px;
            margin-left: auto;
            text-align: right;
            padding: 4px 8px;
            border-radius: 6px;
            background-color: transparent;
            border: 2px solid #eef8f9;
        }
        .price-input:focus { outline: none; box-shadow: 0 0 0 2px #5daeb5; border-color: #5daeb5; }
        .card { background-color: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .main-title { color: #0E4249; }
        .subtitle { color: #3E6064; }
        .progress-bar-main { background-color: #5daeb5; }
        .progress-bg-main { background-color: #cbeef1; }
        .progress-text-main { color: #0E4249; }
        .section-title { color: #0E4249; border-bottom-color: #cbeef1; }
        .checkbox-color { color: #257b84; }
        .add-button { background-color: #257b84; color: white; transition: background-color 0.2s; }
        .add-button:hover { background-color: #1a6d77; }
        .add-input { border-color: #cbeef1; }
        .add-input:focus { border-color: #5daeb5; box-shadow: 0 0 0 1px #5daeb5; outline: none; }
        .install-button { background-color: #0E4249; }
        .install-button:hover { background-color: #1a6d77; }
        .install-instructions { background-color: #f0fafb; border-color: #cbeef1; }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">

    <div class="max-w-4xl mx-auto card p-6 rounded-2xl shadow-xl">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold main-title">Camarinha Obori - Maio/2026</h1>
            <p class="subtitle mt-2">Adicione, edite e marque seus itens. Salvo no seu dispositivo.</p>
        </div>

        <!-- Barra de Progresso Principal -->
        <div class="mb-8">
            <div class="flex justify-between mb-1">
                <span class="text-base font-medium progress-text-main">Progresso Geral (Itens Rituais)</span>
                <span id="progress-percentage" class="text-sm font-medium progress-text-main">0%</span>
            </div>
            <div class="w-full progress-bg-main rounded-full h-4">
                <div id="progress-bar-fill" class="progress-bar-main h-4 rounded-full progress-bar-fill" style="width: 0%"></div>
            </div>
        </div>

        <div class="space-y-8">
            <!-- As seções serão preenchidas dinamicamente pelo JavaScript -->
            <div id="roupas-acessorios-section" class="card p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-semibold section-title border-b-2 pb-3 mb-4">Roupas e Acessórios</h2>
                <ul class="space-y-3"></ul>
                <div class="mt-4 flex">
                    <input type="text" placeholder="Adicionar item..." class="add-input w-full p-2 rounded-l-md border-2">
                    <button class="add-button font-bold py-2 px-4 rounded-r-md">+</button>
                </div>
            </div>

            <div id="rituais-oferendas-section" class="card p-6 rounded-xl shadow-md">
                 <h2 class="text-2xl font-semibold section-title border-b-2 pb-3 mb-4">Itens para Rituais e Oferendas</h2>
                <ul class="space-y-3"></ul>
                <div class="mt-4 flex">
                    <input type="text" placeholder="Adicionar item..." class="add-input w-full p-2 rounded-l-md border-2">
                    <button class="add-button font-bold py-2 px-4 rounded-r-md">+</button>
                </div>
            </div>
            
            <div id="materiais-gerais-section" class="card p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-semibold section-title border-b-2 pb-3 mb-4">Materiais Gerais</h2>
                <ul class="space-y-3"></ul>
                <div class="mt-4 flex">
                    <input type="text" placeholder="Adicionar item..." class="add-input w-full p-2 rounded-l-md border-2">
                    <button class="add-button font-bold py-2 px-4 rounded-r-md">+</button>
                </div>
            </div>

            <div id="criacao-section" class="card p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-semibold section-title border-b-2 pb-3 mb-4">Criação</h2>
                <ul class="space-y-3"></ul>
                <div class="mt-4 flex">
                    <input type="text" placeholder="Adicionar item..." class="add-input w-full p-2 rounded-l-md border-2">
                    <button class="add-button font-bold py-2 px-4 rounded-r-md">+</button>
                </div>
            </div>
            
            <div id="rancho-section" class="card p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-semibold section-title border-b-2 pb-3 mb-4">Rancho da Semana</h2>
                <div class="mb-6 mt-4">
                    <div class="flex justify-between mb-1">
                        <span class="text-base font-medium progress-text-main">Progresso do Rancho</span>
                        <span id="rancho-progress-percentage" class="text-sm font-medium progress-text-main">0%</span>
                    </div>
                    <div class="w-full progress-bg-main rounded-full h-4">
                        <div id="rancho-progress-bar-fill" class="progress-bar-main h-4 rounded-full progress-bar-fill" style="width: 0%"></div>
                    </div>
                </div>
                <ul class="space-y-3"></ul>
                 <div class="mt-4 flex">
                    <input type="text" placeholder="Adicionar item..." class="add-input w-full p-2 rounded-l-md border-2">
                    <button class="add-button font-bold py-2 px-4 rounded-r-md">+</button>
                </div>
            </div>
        </div>
        
        <!-- Resumo dos Custos -->
        <div class="mt-8 p-6 bg-blue-100 rounded-xl shadow-inner">
            <h2 class="text-2xl font-semibold main-title">Resumo dos Custos</h2>
            <div class="mt-4 space-y-2 text-lg">
                <div class="flex justify-between">
                    <span class="font-medium subtitle">Total Itens Rituais:</span>
                    <span id="total-rituais" class="font-bold main-title">R$ 0,00</span>
                </div>
                <div class="flex justify-between">
                    <span class="font-medium subtitle">Total Rancho da Semana:</span>
                    <span id="total-rancho" class="font-bold main-title">R$ 0,00</span>
                </div>
                <hr class="my-2 border-t-2 border-blue-200">
                <div class="flex justify-between text-xl">
                    <span class="font-bold main-title">TOTAL GERAL:</span>
                    <span id="total-geral" class="font-bold main-title">R$ 0,00</span>
                </div>
            </div>
        </div>

        <!-- Botão e Instruções de Instalação -->
        <div class="text-center mt-10">
            <button id="install-guide-button" class="install-button text-white font-bold py-2 px-6 rounded-lg transition-colors">Como Instalar o App?</button>
            <div id="install-instructions" class="hidden mt-4 text-left p-4 install-instructions rounded-lg max-w-2xl mx-auto">
                 <h3 class="font-bold text-lg main-title">Para adicionar à sua tela de início:</h3>
                <p class="mt-2 subtitle"><strong>No Android (Chrome):</strong></p>
                <ol class="list-decimal list-inside ml-4 subtitle">
                    <li>Toque nos três pontos no canto superior direito do navegador.</li>
                    <li>Selecione a opção "Instalar aplicativo" ou "Adicionar à tela inicial".</li>
                </ol>
                <p class="mt-4 subtitle"><strong>No iPhone (Safari):</strong></p>
                <ol class="list-decimal list-inside ml-4 subtitle">
                    <li>Toque no ícone de Compartilhamento (o quadrado com uma seta para cima).</li>
                    <li>Role para baixo e selecione a opção "Adicionar à Tela de Início".</li>
                    <li>Confirme tocando em "Adicionar".</li>
                </ol>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const storageKey = 'camarinhaOboriState-vLocalPrice-v3'; 
            
            if ('serviceWorker' in navigator) {
                const serviceWorkerContent = `
                    const CACHE_NAME = 'camarinha-obori-cache-vFinal-2';
                    const urlsToCache = ['./', './index.html', './manifest.json', './icone-obori.jpg'];
                    self.addEventListener('install', event => {
                        event.waitUntil(
                            caches.open(CACHE_NAME).then(cache => cache.addAll(urlsToCache))
                        );
                    });
                    self.addEventListener('fetch', event => {
                        event.respondWith(
                            caches.match(event.request).then(response => response || fetch(event.request))
                        );
                    });
                    self.addEventListener('activate', event => {
                        const cacheWhitelist = [CACHE_NAME];
                        event.waitUntil(
                            caches.keys().then(cacheNames => Promise.all(
                                cacheNames.map(cacheName => {
                                    if (cacheWhitelist.indexOf(cacheName) === -1) {
                                        return caches.delete(cacheName);
                                    }
                                })
                            ))
                        );
                    });
                `;
                const swBlob = new Blob([serviceWorkerContent], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(swBlob);
                navigator.serviceWorker.register(swUrl)
                    .then(reg => console.log('Service worker registered successfully:', reg))
                    .catch(err => console.error('Service worker registration failed:', err));
            }

            const defaultState = {
                "roupas-acessorios-section": [ { "text": "05 cuecas ou calcinhas brancas", "checked": false, "price": "" }, { "text": "04 lenços brancos", "checked": false, "price": "" }, { "text": "04 toalhinhas para o banco", "checked": false, "price": "" }, { "text": "04 lençóis brancos (80x80)", "checked": false, "price": "" }, { "text": "03 fronhas brancas", "checked": false, "price": "" }, { "text": "02 sutiãs", "checked": false, "price": "" }, { "text": "02 jalecos ou camisetas brancas", "checked": false, "price": "" }, { "text": "02 calças brancas", "checked": false, "price": "" }, { "text": "02 lenços pequenos para tapar os olhos", "checked": false, "price": "" }, { "text": "01 traje completo para saída de branco", "checked": false, "price": "" }, { "text": "01 quepe para saída ou turbante", "checked": false, "price": "" }, { "text": "01 boné", "checked": false, "price": "" }, { "text": "01 chinelo branco", "checked": false, "price": "" }, { "text": "01 punhal para coração", "checked": false, "price": "" }, { "text": "01 pente branco", "checked": false, "price": "" } ],
                "rituais-oferendas-section": [ { "text": "07 Velas de Cera Grande", "checked": false, "price": "" }, { "text": "03 Alguidares Médios", "checked": false, "price": "" }, { "text": "02 potes/vidros de Mel", "checked": false, "price": "" }, { "text": "02 Sabões de Coco", "checked": false, "price": "" }, { "text": "01 Caixa e 02 Velas de 7 Dias", "checked": false, "price": "" }, { "text": "21 unidades de Quiabo", "checked": false, "price": "" }, { "text": "05 panos de 1 metro", "checked": false, "price": "" }, { "text": "05 limões", "checked": false, "price": "" }, { "text": "05 ramos de Trigo", "checked": false, "price": "" }, { "text": "04 ovos brancos", "checked": false, "price": "" }, { "text": "03 maços de vela nº 5", "checked": false, "price": "" }, { "text": "03 cigarros para Pompo Gira", "checked": false, "price": "" }, { "text": "02 suportes para vela sete dias", "checked": false, "price": "" }, { "text": "02 bifes grandes sem passar na máquina", "checked": false, "price": "" }, { "text": "01 vidro de azeite de Dendê", "checked": false, "price": "" }, { "text": "01 kg de farinha de mandioca", "checked": false, "price": "" }, { "text": "01 charruto para Exu", "checked": false, "price": "" }, { "text": "01 cápsula de pimenta da Costa", "checked": false, "price": "" }, { "text": "01 cacho de uva Itália", "checked": false, "price": "" }, { "text": "01 pacote de canjica", "checked": false, "price": "" }, { "text": "01 champanhe de Oxalá", "checked": false, "price": "" }, { "text": "01 cachaça para Exu", "checked": false, "price": "" }, { "text": "01 champanhe para Pompo Gira", "checked": false, "price": "" }, { "text": "01 taça para Pombo Gira", "checked": false, "price": "" }, { "text": "01 pacote de banha de Ori", "checked": false, "price": "" }, { "text": "01 defumador espiritual", "checked": false, "price": "" }, { "text": "01 semente de Obi", "checked": false, "price": "" }, { "text": "01 semente de Orobo", "checked": false, "price": "" }, { "text": "01 pemba branca", "checked": false, "price": "" }, { "text": "Coco ralado", "checked": false, "price": "" } ],
                "materiais-gerais-section": [ { "text": "04 Copos Grandes de Vidro", "checked": false, "price": "" }, { "text": "08 latas de óleo", "checked": false, "price": "" }, { "text": "03 caixas de lamparinas São Jorge", "checked": false, "price": "" }, { "text": "02 caixas de fósforo", "checked": false, "price": "" }, { "text": "01 quartinha de barro (20 cm)", "checked": false, "price": "" }, { "text": "01 prato branco", "checked": false, "price": "" }, { "text": "01 colher", "checked": false, "price": "" }, { "text": "01 xícara com pires branco", "checked": false, "price": "" }, { "text": "01 presto barba", "checked": false, "price": "" }, { "text": "01 esteira", "checked": false, "price": "" } ],
                "criacao-section": [ { "text": "01 pombo branco", "checked": false, "price": "" } ],
                "rancho-section": [ { "text": "2 KG DE ARROZ AMARELO", "checked": false, "price": "" }, { "text": "1 KG DE ARROZ BRANCO", "checked": false, "price": "" }, { "text": "2 KG DE AÇÚCAR", "checked": false, "price": "" }, { "text": "2 KG DE TRIGO", "checked": false, "price": "" }, { "text": "1 MACARRÃO", "checked": false, "price": "" }, { "text": "6 AZEITE", "checked": false, "price": "" }, { "text": "1 KG DE CANJICA", "checked": false, "price": "" }, { "text": "2 KG FARINHA", "checked": false, "price": "" }, { "text": "1 KG FEIJÃO VERMELHO", "checked": false, "price": "" }, { "text": "1 KG DE CAFÉ", "checked": false, "price": "" }, { "text": "1 CX DE LEITE (12 UNID.)", "checked": false, "price": "" }, { "text": "1 BANDEJA DE OVOS (30 UNID.)", "checked": false, "price": "" }, { "text": "1 QUEIJO RALADO", "checked": false, "price": "" }, { "text": "1 LEITE CONDENSADO", "checked": false, "price": "" }, { "text": "6 CREME DE LEITE", "checked": false, "price": "" }, { "text": "4 KG DE SAL", "checked": false, "price": "" }, { "text": "8 REFRIGERANTE", "checked": false, "price": "" }, { "text": "1 PACOTE PAPEL TOALHA", "checked": false, "price": "" }, { "text": "4 PACOTES DE BOLACHA", "checked": false, "price": "" }, { "text": "1 PACOTE COCO RALADO DE 100G CADA", "checked": false, "price": "" }, { "text": "1 MASSA DE TOMATE ELEFANTE MÉDIA", "checked": false, "price": "" }, { "text": "1 VIDRO DE LEITE DE COCO", "checked": false, "price": "" }, { "text": "10 SUCOS", "checked": false, "price": "" }, { "text": "1 TEMPERO VERDE A VONTADE", "checked": false, "price": "" }, { "text": "2 KG DE CEBOLA", "checked": false, "price": "" }, { "text": "1 KG DE TOMATE", "checked": false, "price": "" }, { "text": "3 KG DE BATATA", "checked": false, "price": "" }, { "text": "VERDURAS DA SUA PREFERENCIA", "checked": false, "price": "" }, { "text": "FRUTAS A GOSTO", "checked": false, "price": "" }, { "text": "1 MARGARINA QUALLY", "checked": false, "price": "" }, { "text": "1 NATA", "checked": false, "price": "" }, { "text": "1 REQUEIJÃO DE 400G", "checked": false, "price": "" }, { "text": "400G DE QUEIJO", "checked": false, "price": "" }, { "text": "400G DE PRESUNTO", "checked": false, "price": "" }, { "text": "1 CALDO DE FRANGO GRANDE", "checked": false, "price": "" }, { "text": "2 KG DE CARNE MOÍDA", "checked": false, "price": "" }, { "text": "2 KG DE BIFE", "checked": false, "price": "" }, { "text": "2 KG DE CARNE PARA ASSAR DE PANELA", "checked": false, "price": "" }, { "text": "2 PACOTES DE COXA E SOBRECOXA", "checked": false, "price": "" }, { "text": "1 KG DE LINGUIÇA CALABRESA", "checked": false, "price": "" }, { "text": "1 KG DE LINGUIÇA PARA CHURRASCO", "checked": false, "price": "" }, { "text": "1 KG DE FILÉ DE PEIXE", "checked": false, "price": "" }, { "text": "1 KG DE CAMARÃO SEM CASCA", "checked": false, "price": "" }, { "text": "1 VASSOURA", "checked": false, "price": "" }, { "text": "1 RODO DE CHÃO", "checked": false, "price": "" }, { "text": "6 PANO DE PRATO", "checked": false, "price": "" }, { "text": "1 LITRO ÁGUA SANITÁRIA", "checked": false, "price": "" }, { "text": "1 AMACIANTE DE 2 LITROS", "checked": false, "price": "" }, { "text": "2 PACOTES DE ESPONJA DE LOUÇA", "checked": false, "price": "" }, { "text": "1 PACOTE DE BOMBRIL", "checked": false, "price": "" }, { "text": "1 PALHA DE AÇO", "checked": false, "price": "" }, { "text": "15 CREME DENTAL", "checked": false, "price": "" }, { "text": "1 PACOTE DE LIXO DE 100 LITROS", "checked": false, "price": "" }, { "text": "1 PACOTE DE LIXO DE 30 LITROS", "checked": false, "price": "" }, { "text": "6 DETERGENTE DE LOUÇA", "checked": false, "price": "" }, { "text": "1 CX DE SABÃO EM PÓ (OMO, BRILHANTE OU TIXAN)", "checked": false, "price": "" }, { "text": "1 CX DE VELAS", "checked": false, "price": "" }, { "text": "1 LATA DE MILHO", "checked": false, "price": "" }, { "text": "1 LATA DE ERVILHA", "checked": false, "price": "" }, { "text": "1 CEBOLA ROXA", "checked": false, "price": "" }, { "text": "1 COMINHO", "checked": false, "price": "" }, { "text": "1 POTE DE ALHO", "checked": false, "price": "" }, { "text": "2 KG DE FEIJÃO FRADINHO", "checked": false, "price": "" }, { "text": "1 BOMBONAS DE ÁGUA", "checked": false, "price": "" }, { "text": "200 COPOS DESCARTÁVEIS 200ML", "checked": false, "price": "" }, { "text": "ÁGUA 1 FARDO DIVIDIR ENTRE OS DEITADOS", "checked": false, "price": "" }, { "text": "2 BOTIJÃO DE GÁS DIVIDIDO ENTRE OS DEITADOS", "checked": false, "price": "" } ]
            };

            function saveState() {
                const currentState = {};
                document.querySelectorAll('.space-y-8 > div[id]').forEach(section => {
                    const sectionId = section.id;
                    const items = [];
                    section.querySelectorAll('.checklist-item').forEach(item => {
                        const checkbox = item.querySelector('input[type="checkbox"]');
                        const span = item.querySelector('span.editable-span');
                        const priceInput = item.querySelector('.price-input');
                        items.push({ text: span.textContent, checked: checkbox.checked, price: priceInput.value });
                    });
                    currentState[sectionId] = items;
                });
                localStorage.setItem(storageKey, JSON.stringify(currentState));
            }

            function loadState() {
                const savedStateJSON = localStorage.getItem(storageKey);
                let currentState;
                try {
                    currentState = savedStateJSON ? JSON.parse(savedStateJSON) : null;
                    if (currentState && typeof currentState !== 'object') {
                        currentState = null;
                    }
                } catch (e) {
                    console.error("Error parsing saved state:", e);
                    currentState = null;
                }
                
                renderState(currentState);
            }

            function renderState(state) {
                const data = (state && Object.keys(state).length > 0) ? state : defaultState;
                for (const sectionId in defaultState) { // Iterar sobre o defaultState para garantir que todas as secções são criadas
                    const section = document.getElementById(sectionId);
                    if (section) {
                        const list = section.querySelector('ul');
                        list.innerHTML = ''; 
                        const itemsData = data[sectionId] || defaultState[sectionId];
                        itemsData.forEach(itemData => {
                            const newItem = createNewListItem(itemData.text, itemData.checked, itemData.price);
                            list.appendChild(newItem);
                        });
                    }
                }
                updateAllTheThings();
            }

            function createNewListItem(text, checked = false, price = "") {
                const li = document.createElement('li');
                li.className = 'checklist-item flex items-center gap-2';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = checked;
                checkbox.className = 'h-5 w-5 rounded border-gray-400 checkbox-color focus:ring-cyan-500 flex-shrink-0';
                
                const span = document.createElement('span');
                span.contentEditable = 'true';
                span.className = 'text-gray-800 editable-span';
                span.textContent = text;
                
                const priceInput = document.createElement('input');
                priceInput.type = 'number';
                priceInput.className = 'price-input w-24 text-right p-1 rounded-md border-2 bg-transparent';
                priceInput.placeholder = 'R$ 0,00';
                priceInput.step = '0.01';
                priceInput.min = '0';
                priceInput.value = price;

                li.appendChild(checkbox);
                li.appendChild(span);
                li.appendChild(priceInput);
                
                attachEventListeners(li);
                return li;
            }

            function attachEventListeners(listItem) {
                listItem.querySelector('input[type="checkbox"]').addEventListener('change', updateAllTheThings);
                listItem.querySelector('span.editable-span').addEventListener('blur', saveState);
                listItem.querySelector('.price-input').addEventListener('input', updateAllTheThings);
            }
            
            function calculateTotals() {
                let totalRituais = 0;
                let totalRancho = 0;

                document.querySelectorAll('#roupas-acessorios-section .price-input, #rituais-oferendas-section .price-input, #materiais-gerais-section .price-input, #criacao-section .price-input').forEach(input => {
                    totalRituais += parseFloat(input.value) || 0;
                });
                
                document.querySelectorAll('#rancho-section .price-input').forEach(input => {
                    totalRancho += parseFloat(input.value) || 0;
                });
                
                const totalGeral = totalRituais + totalRancho;

                document.getElementById('total-rituais').textContent = `R$ ${totalRituais.toFixed(2).replace('.', ',')}`;
                document.getElementById('total-rancho').textContent = `R$ ${totalRancho.toFixed(2).replace('.', ',')}`;
                document.getElementById('total-geral').textContent = `R$ ${totalGeral.toFixed(2).replace('.', ',')}`;
            }

            function updateAllProgress() {
                const mainCheckboxes = document.querySelectorAll('#roupas-acessorios-section input, #rituais-oferendas-section input, #materiais-gerais-section input, #criacao-section input');
                const checkedMainItems = document.querySelectorAll('#roupas-acessorios-section input:checked, #rituais-oferendas-section input:checked, #materiais-gerais-section input:checked, #criacao-section input:checked');
                const mainPercentage = mainCheckboxes.length > 0 ? (checkedMainItems.length / mainCheckboxes.length) * 100 : 0;
                document.getElementById('progress-bar-fill').style.width = mainPercentage + '%';
                document.getElementById('progress-percentage').textContent = Math.round(mainPercentage) + '%';
                
                const ranchoCheckboxes = document.querySelectorAll('#rancho-section input[type="checkbox"]');
                const checkedRanchoItems = document.querySelectorAll('#rancho-section input[type="checkbox"]:checked');
                const ranchoPercentage = ranchoCheckboxes.length > 0 ? (checkedRanchoItems.length / ranchoCheckboxes.length) * 100 : 0;
                document.getElementById('rancho-progress-bar-fill').style.width = ranchoPercentage + '%';
                document.getElementById('rancho-progress-percentage').textContent = Math.round(ranchoPercentage) + '%';
            }

            function updateAllTheThings() {
                calculateTotals();
                updateAllProgress();
                saveState();
            }

            document.querySelectorAll('.add-button').forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    const text = input.value.trim();
                    if (text) {
                        const list = this.closest('.card').querySelector('ul');
                        const newItem = createNewListItem(text);
                        list.appendChild(newItem);
                        input.value = '';
                        updateAllTheThings();
                    }
                });
            });

            document.getElementById('install-guide-button').addEventListener('click', () => {
                document.getElementById('install-instructions').classList.toggle('hidden');
            });

            // Initialize the app
            loadState();
        });
    </script>
</body>
</html>
